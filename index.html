<!DOCTYPE html>
<html>
<head>

<title>SBX Tracker</title>

</head>


<body>
SBX Tracker

<div>
 <svg width="100" height="20">
        <text x="10" y="20" style="fill:red;">Lane 1: </text>
  </svg>
  <svg width="100" height="20">
        <rect id='Lane1Hole' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
  <svg width="100" height="20">
        <rect id='Lane1Split' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

  <svg width="100" height="20">
        <rect id='Lane1Finish' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
</div>

<div>
    <svg width="100" height="20">
        <text x="10" y="20" style="fill:red;">Lane 2: </text>
    </svg>

    <svg width="100" height="20">
        <rect id='Lane2Hole' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane2Split' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane2Finish' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
</div>

<div>
    <svg width="100" height="20">
        <text x="10" y="20" style="fill:red;">Lane 3: </text>
    </svg>

    <svg width="100" height="20">
        <rect id='Lane3Hole' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane3Split' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane3Finish' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
</div>


<div>
    <svg width="100" height="20">
        <text x="10" y="20" style="fill:red;">Lane 4: </text>
    </svg>

    <svg width="100" height="20">
        <rect id='Lane4Hole' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane4Split' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane4Finish' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
</div>

<div>
    <svg width="100" height="20">
        <text x="10" y="20" style="fill:red;">Lane 5: </text>
    </svg>

    <svg width="100" height="20">
        <rect id='Lane5Hole' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane5Split' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane5Finish' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
</div>


<div>
    <svg width="100" height="20">
        <text x="10" y="20" style="fill:red;">Lane 6: </text>
    </svg>

    <svg width="100" height="20">
        <rect id='Lane6Hole' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane6Split' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>

    <svg width="100" height="20">
        <rect id='Lane6Finish' width="30" height="75" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)" />
    </svg>
</div>

<div>
    <button onclick="refreshData();">Refresh</button>

</div>



<script>
function refreshData() {
    console.log('refreshData called');
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        console.log(this.responseText);
        latestData = JSON.parse(this.responseText);
        console.log(latestData)
        document.getElementById('Lane1Hole').width.baseVal.value = latestData.Lane1FirstAtHole;
        document.getElementById('Lane2Hole').width.baseVal.value = latestData.Lane2FirstAtHole;
        document.getElementById('Lane3Hole').width.baseVal.value = latestData.Lane3FirstAtHole;
        document.getElementById('Lane4Hole').width.baseVal.value = latestData.Lane4FirstAtHole;
        document.getElementById('Lane5Hole').width.baseVal.value = latestData.Lane5FirstAtHole;
        document.getElementById('Lane6Hole').width.baseVal.value = latestData.Lane6FirstAtHole;
        document.getElementById('Lane1Split').width.baseVal.value = latestData.Lane1FirstAtSplit;
        document.getElementById('Lane2Split').width.baseVal.value = latestData.Lane2FirstAtSplit;
        document.getElementById('Lane3Split').width.baseVal.value = latestData.Lane3FirstAtSplit;
        document.getElementById('Lane4Split').width.baseVal.value = latestData.Lane4FirstAtSplit;
        document.getElementById('Lane5Split').width.baseVal.value = latestData.Lane5FirstAtSplit;
        document.getElementById('Lane6Split').width.baseVal.value = latestData.Lane6FirstAtSplit;
        document.getElementById('Lane1Finish').width.baseVal.value = latestData.Lane1FirstAtFinish;
        document.getElementById('Lane2Finish').width.baseVal.value = latestData.Lane2FirstAtFinish;
        document.getElementById('Lane3Finish').width.baseVal.value = latestData.Lane3FirstAtFinish;
        document.getElementById('Lane4Finish').width.baseVal.value = latestData.Lane4FirstAtFinish;
        document.getElementById('Lane5Finish').width.baseVal.value = latestData.Lane5FirstAtFinish;
        document.getElementById('Lane6Finish').width.baseVal.value = latestData.Lane6FirstAtFinish;
      } else {
        console.log (this.status);
        }
    };
    xhttp.open("GET", "https://sbxdataprovider.azurewebsites.net/", true);
    xhttp.send();
};

</script>


</body>
</html>

